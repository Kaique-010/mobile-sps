{% extends 'base.html' %}
{% load static %}
{% block title %}{% if form.instance.pk %}Editar Família de Produto{% else %}Cadastrar Família de Produto{% endif %}{%endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/form.css' %}">

<div class="container page-container">
  <div class="page-header-custom">
    <h2 class="page-title"><i class="bi bi-box"></i> {% if form.instance.pk %}Editar Família de Produto{% else %}Cadastrar Família de Produto{% endif %}</h2>
    <div class="page-actions">
      <a href="{% url 'familias_web' slug=slug %}" class="btn btn-outline-secondary btn-sm">
        <i class="bi bi-arrow-left"></i> Voltar à Lista
      </a>
    </div>
  </div>

  {% if messages %}
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endfor %}
  {% endif %}
  {% if form.errors %}
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>Erro:</strong> Corrija os erros destacados nos campos.
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endif %}

  <div class="card">
    <div class="card-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <h5>Dados da Família</h5>
        <br>
        <div class="row">
          {% if form.instance.pk %}
          <div class="col-md-6">
            <label for="codigo">Código da Família</label>
            <input type="text" class="form-control" id="codigo" value="{{ form.instance.codigo }}" readonly>
          </div>
          {% endif %}

          <div class="col-md-6">
            <label for="{{ form.descricao.id_for_label }}">Descrição</label>
            {{ form.descricao }}
            {% if form.descricao.errors %}
            <div class="alert alert-danger mt-1">{{ form.descricao.errors|striptags }}</div>
            {% endif %}
          </div>
        </div>

        <div class="mt-3 form-actions">
          <button type="submit" class="btn btn-primary"><i class="bi bi-check-circle"></i> Salvar</button>
          <a href="{% url 'familias_web' slug=slug %}" class="btn btn-secondary">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
