{% extends 'base.html' %}
{% load static %}
{% block title %}Alíquotas Padrão{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/list.css' %}">
<div class="container page-container">
  <div class="page-header-custom">
    <h2 class="page-title w-100 text-center"><i class="bi bi-percent"></i> Alíquotas Padrão</h2>
    <div class="page-actions">
      <a href="{% url 'ncmfiscalpadrao_create' slug=slug %}" class="btn btn-outline-primary btn-sm">
        <i class="bi bi-plus"></i> Novo
      </a>
    </div>
  </div>

  {% if messages %}
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endfor %}
  {% endif %}

  <div class="card">
    <div class="card-body padding-20">
      <div class="table-responsive d-none d-md-block padding-20">
        <table class="table table-striped padding-20">
          <thead>
            <tr>
              <th>ID</th>
              <th>NCM</th>
              <th>CST Icms</th>
              <th>Alíquota Icms</th>
              <th>CST pis</th>
              <th>Alíquota PIS</th>
              <th>CST cofins</th>
              <th>Alíquota COFINS</th>
              <th>CST cbs</th>
              <th>Alíquota CBS</th>
              <th>CST ibs</th>
              <th>Alíquota IBS</th>
              <th class="text-end">Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for item in itens %}
            <tr>
              <td>{{ item.id }}</td>
              <td>{{ item.ncm.ncm_codi }}</td>
              <td>{{ item.cst_icms|default:'-' }}</td>
              <td>{{ item.aliq_icms|default:'-' }}</td>
              <td>{{ item.cst_pis|default:'-' }}</td>
              <td>{{ item.aliq_pis|default:'-' }}</td>
              <td>{{ item.cst_cofins|default:'-' }}</td>
              <td>{{ item.aliq_cofins|default:'-' }}</td>
              <td>{{ item.cst_cbs|default:'-' }}</td>
              <td>{{ item.aliq_cbs|default:'-' }}</td>
              <td>{{ item.cst_ibs|default:'-' }}</td>
              <td>{{ item.aliq_ibs|default:'-' }}</td>
              <td class="text-end">
                <a href="{% url 'ncmfiscalpadrao_update' slug=slug pk=item.pk %}"
                  class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-pencil"></i> Editar
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="14" class="text-center">Nenhum registro encontrado.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="card-list d-md-none">
        {% for item in itens %}
        <div class="card mb-2">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <div class="fw-semibold">NCM: {{ item.ncm.ncm_codi }}</div>
              <div class="text-muted small">ID: {{ item.id }}</div>
            </div>
            <div class="mt-2 small">
              <div class="row g-2">
                <div class="col-6"><strong>ICMS:</strong><br>{{ item.cst_icms|default:'-' }} / {{ item.aliq_icms|default:'-' }}%</div>
                <div class="col-6"><strong>PIS:</strong><br>{{ item.cst_pis|default:'-' }} / {{ item.aliq_pis|default:'-' }}%</div>
                <div class="col-6"><strong>COFINS:</strong><br>{{ item.cst_cofins|default:'-' }} / {{ item.aliq_cofins|default:'-' }}%</div>
                <div class="col-6"><strong>CBS:</strong><br>{{ item.cst_cbs|default:'-' }} / {{ item.aliq_cbs|default:'-' }}%</div>
                <div class="col-6"><strong>IBS:</strong><br>{{ item.cst_ibs|default:'-' }} / {{ item.aliq_ibs|default:'-' }}%</div>
              </div>
            </div>
            <div class="mt-3 d-flex gap-2">
              <a href="{% url 'ncmfiscalpadrao_update' slug=slug pk=item.pk %}" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-pencil"></i> Editar
              </a>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="alert alert-info">Nenhum registro encontrado.</div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}