{% extends 'base.html' %}
{% load static %}
{% block title %}NCMs{% endblock %}

{% block content %}
<div class="container page-container">
  <div class="page-header-custom">
    <h2 class="page-title"><i class="bi bi-upc-scan"></i> NCMs</h2>
    <div class="page-actions">
      <a href="{% url 'ncm_create' slug=slug %}" class="btn btn-primary btn-sm">
        <i class="bi bi-plus"></i> Novo NCM
      </a>
    </div>
  </div>

  <form method="get" class="mb-3">
    <div class="input-group">
      <input type="text" name="q" value="{{ busca }}" class="form-control" placeholder="Buscar por código ou descrição">
      <button class="btn btn-outline-secondary" type="submit"><i class="bi bi-search"></i></button>
    </div>
  </form>

  {% if messages %}
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endfor %}
  {% endif %}

  <div class="card">
    <div class="card-body table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Código</th>
            <th>Descrição</th>
            <th class="text-end">Ações</th>
          </tr>
        </thead>
        <tbody>
        {% for ncm in itens %}
          <tr>
            <td>{{ ncm.ncm_codi }}</td>
            <td>{{ ncm.ncm_desc }}</td>
            <td class="text-end">
              <a href="{% url 'ncm_update' slug=slug pk=ncm.pk %}" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-pencil"></i> Editar
              </a>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="3" class="text-center">Nenhum NCM encontrado.</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}