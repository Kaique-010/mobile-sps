{% load static %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-basicos" role="tab">Dados Básicos</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-icms" role="tab">ICMS</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-ipi" role="tab">IPI</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-pis-cofins" role="tab">PIS/COFINS</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-retencoes" role="tab">Retenções</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-ibs-cbs" role="tab">IBS/CBS</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-outros" role="tab">Outros</a></li>
  </ul>

  <div class="tab-content mt-3">
    <div id="tab-basicos" class="tab-pane fade show active" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.basicos %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-icms" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.icms %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-ipi" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.ipi %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-pis-cofins" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.pis_cofins %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-retencoes" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.retencoes %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-ibs-cbs" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.ibs_cbs %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div id="tab-outros" class="tab-pane fade" role="tabpanel">
      <div class="row">
        {% for field in grouped_fields.outros %}
          <div class="col-md-6 mb-3">
            <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}<div class="text-danger">{{ field.errors }}</div>{% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="mt-3 d-flex gap-2">
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="/web/{{ slug }}/cfop/" class="btn btn-secondary">Voltar</a>
  </div>
</form>